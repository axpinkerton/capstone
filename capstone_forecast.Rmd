---
title: "capstone"
author: "Alex"
date: "7/12/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggplot2)
library(forecast)
library(stringr)
library(lubridate)
library(e1071)
zri = read_csv('/Users/APinkerton/NYC_DS_A/projects/capstone/Zip_Zri_AllHomesPlusMultifamily.csv')
zori = read_csv('/Users/APinkerton/NYC_DS_A/projects/capstone/Zip_ZORI_AllHomesPlusMultifamily_SSA.csv')

zori_longer <- zori %>% pivot_longer(cols=starts_with('20'),names_to = 'month_yr',values_to = 'rent',values_drop_na = F)

zori_longer$year = substr(zori_longer$month_yr,1,4)
zori_longer$month = substr(zori_longer$month_yr,6,7)
zl1 <- zori_longer[zori_longer$year > 2014,] 
sub_zl <- zl1[zl1$year<2021,]
sub_zori <- sub_zl %>% drop_na(rent)

zori_full <- sub_zori %>% group_by(month_yr)%>%summarise(mean_rent=as.numeric(mean(rent)))
zori_full$mo = substr(zori_full$month_yr,6,7)
zori_full$yr = substr(zori_full$month_yr,1,4)
zori_full = subset(zori_full,select=c(-month_yr))
to_diff <- zori_full %>% pivot_wider(names_from = mo, values_from = mean_rent)
to_diff$yr=as.numeric(to_diff$yr)
ts(to_diff)




```

